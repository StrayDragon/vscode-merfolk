{
  "name": "vscode-merfolk",
  "displayName": "Merfolk",
  "description": "Minimal Mermaid diagram preview extension",
  "version": "0.0.6",
  "engines": {
    "vscode": "^1.105.1"
  },
  "categories": [
    "Other"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/straydragon/vscode-merfolk"
  },
  "publisher": "l8ng",
  "license": "MIT",
  "icon": "icon.png",
  "activationEvents": [
    "onCommand:mermaid.preview",
    "onCommand:merfolkEditor.open",
    "onCommand:merfolkEditor.create",
    "onLanguage:mermaid",
    "onLanguage:markdown",
    "onLanguage:typescript",
    "onLanguage:javascript",
    "onLanguage:python",
    "onLanguage:java",
    "onLanguage:go",
    "onLanguage:rust",
    "onLanguage:cpp",
    "onLanguage:c",
    "onLanguage:csharp"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "configuration": {
      "title": "Merfolk",
      "properties": {
        "merfolk.preview.defaultColumn": {
          "type": "string",
          "enum": [
            "beside",
            "right",
            "left",
            "active",
            "one",
            "two",
            "three"
          ],
          "default": "beside",
          "description": "Controls where Mermaid file previews open by default",
          "enumDescriptions": [
            "Open preview in the column beside the current editor",
            "Open preview in the rightmost column",
            "Open preview in the leftmost column",
            "Open preview in the current editor column",
            "Open preview in column one",
            "Open preview in column two",
            "Open preview in column three"
          ]
        },
        "merfolk.syntaxHighlight.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable Mermaid syntax highlighting in Markdown files"
        },
        "merfolk.syntaxHighlight.cacheSize": {
          "type": "number",
          "default": 50,
          "minimum": 10,
          "maximum": 200,
          "description": "Maximum number of grammar files to cache for syntax highlighting"
        },
        "merfolk.syntaxHighlight.debounceDelay": {
          "type": "number",
          "default": 300,
          "minimum": 100,
          "maximum": 1000,
          "description": "Debounce delay for syntax highlighting updates in milliseconds"
        },
        "merfolk.editor.standalonePath": {
          "type": "string",
          "default": "",
          "description": "Merfolk Editor 本地构建目录，需包含 merfolk-editor.iife.js 与 merfolk-editor.css；默认会尝试 node_modules/merfolk-editor/dist/standalone（可选依赖 github:StrayDragon/merfolk-editor#main，需自行构建生成 dist/standalone），或从仓库克隆后手动指定 dist/standalone"
        }
      }
    },
    "commands": [
      {
        "command": "mermaid.preview",
        "title": "Mermaid: Open Preview",
        "icon": "$(preview)"
      },
      {
        "command": "mermaidChart.preview",
        "title": "Preview MermaidChart Link"
      },
      {
        "command": "mermaidChart.openFile",
        "title": "Open MermaidChart File"
      },
      {
        "command": "mermaidChart.refreshCodeLens",
        "title": "Mermaid: Refresh CodeLens"
      },
      {
        "command": "merfolkEditor.open",
        "title": "Mermaid: 使用 Merfolk Editor 打开",
        "category": "Merfolk"
      },
      {
        "command": "merfolkEditor.create",
        "title": "Mermaid: 新建并在 Merfolk Editor 中编辑",
        "category": "Merfolk"
      }
    ],
    "languages": [
      {
        "id": "mermaid",
        "aliases": [
          "Mermaid",
          "mermaid"
        ],
        "extensions": [
          ".mmd",
          ".mermaid"
        ],
        "configuration": "./language-configuration.json"
      }
    ],
    "grammars": [
      {
        "scopeName": "source.mermaid.embedded.markdown",
        "injectTo": [
          "text.html.markdown"
        ],
        "path": "./syntaxes/mermaid-markdown.json"
      },
      {
        "language": "mermaid",
        "scopeName": "source.mermaid",
        "path": "./syntaxes/mermaid.tmLanguage.json"
      }
    ],
    "menus": {
      "editor/title": [
        {
          "command": "mermaid.preview",
          "when": "resourceLangId == mermaid",
          "group": "navigation"
        },
        {
          "command": "merfolkEditor.open",
          "when": "resourceLangId == mermaid",
          "group": "navigation@1"
        }
      ],
      "commandPalette": [
        {
          "command": "mermaid.preview",
          "when": "resourceLangId == mermaid"
        },
        {
          "command": "merfolkEditor.open",
          "when": "resourceLangId == mermaid"
        },
        {
          "command": "merfolkEditor.create"
        }
      ]
    },
    "keybindings": [
      {
        "command": "mermaid.preview",
        "key": "ctrl+shift+v",
        "mac": "cmd+shift+v",
        "when": "resourceLangId == mermaid"
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "pnpm run package",
    "compile": "pnpm run check-types && pnpm run lint && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "pnpm run check-types && pnpm run lint && node esbuild.js --production",
    "check-types": "tsc --noEmit",
    "lint": "eslint src"
  },
  "optionalDependencies": {
    "merfolk-editor": "github:StrayDragon/merfolk-editor#main"
  },
  "devDependencies": {
    "@types/node": "22.x",
    "@types/vscode": "^1.105.1",
    "@vscode/vsce": "^3.7.1",
    "esbuild": "^0.27.1",
    "eslint": "^9.39.1",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.1"
  }
}
