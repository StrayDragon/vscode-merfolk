%% 代码审查流程图
flowchart TD
    Start([开发者提交PR]) --> Check{自动检查通过?}

    Check -->|否| AutoFail[自动化检查失败]
    AutoFail --> FixIssues[修复问题]
    FixIssues --> Start

    Check -->|是| AssignReviewer[分配审查者]

    AssignReviewer --> ReviewStart[开始代码审查]
    ReviewStart --> CheckChanges{检查变更}

    %% 审查要点
    CheckChanges --> CodeQuality[代码质量]
    CheckChanges --> Logic[业务逻辑]
    CheckChanges --> Security[安全性]
    CheckChanges --> Performance[性能影响]
    CheckChanges --> Tests[测试覆盖]

    CodeQuality --> ReviewDecision{审查决定}
    Logic --> ReviewDecision
    Security --> ReviewDecision
    Performance --> ReviewDecision
    Tests --> ReviewDecision

    ReviewDecision -->|请求变更| RequestChanges[请求修改]
    ReviewDecision -->|批准| Approve[批准合并]

    RequestChanges --> DeveloperFix[开发者修改]
    DeveloperFix --> ReviewStart

    Approve --> AutoMerge[自动合并]
    AutoMerge --> Deploy[部署测试]
    Deploy --> Monitor[监控观察]
    Monitor --> End([完成])

    %% 相关文档链接
    AutoMerge -.-> Docs[<a href="MermaidChart:../basic/flowchart.mmd">基础流程图</a>]
    CodeQuality -.-> Standards[<a href="MermaidChart:../advanced/state-machine.mmd">状态管理</a>]
    Security -.-> SecurityGuide[<a href="MermaidChart:../architecture/system-design.mmd">安全设计</a>]

    classDef startEnd fill:#4caf50,stroke:#388e3c,color:#fff
    classDef process fill:#2196f3,stroke:#1976d2,color:#fff
    classDef decision fill:#ff9800,stroke:#f57c00,color:#fff
    classDef error fill:#f44336,stroke:#d32f2f,color:#fff
    classDef success fill:#4caf50,stroke:#388e3c,color:#fff
    classDef link fill:#9c27b0,stroke:#7b1fa2,color:#fff

    class Start,End startEnd
    class CheckChanges,CodeQuality,Logic,Security,Performance,Tests,ReviewStart process
    class Check,ReviewDecision decision
    class AutoFail,RequestChanges error
    class Approve,AutoMerge,Deploy,Monitor success
    class Docs,Standards,SecurityGuide link