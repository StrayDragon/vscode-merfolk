%% 系统架构设计图
graph TB
    subgraph "前端层"
        WebApp[Web应用]
        MobileApp[移动应用]
        AdminPanel[管理后台]
    end

    subgraph "API网关"
        Gateway[API Gateway]
        Auth[认证服务]
        RateLimit[限流服务]
    end

    subgraph "微服务层"
        UserService[用户服务]
        ProductService[产品服务]
        OrderService[订单服务]
        PaymentService[支付服务]
        NotificationService[通知服务]
    end

    subgraph "数据存储层"
        MySQL[(MySQL)]
        MongoDB[(MongoDB)]
        Redis[(Redis)]
        Elasticsearch[(Elasticsearch)]
    end

    subgraph "基础设施"
        Docker[容器化]
        Kubernetes[K8s编排]
        Monitoring[监控系统]
        Logging[日志系统]
    end

    %% 连接关系
    WebApp --> Gateway
    MobileApp --> Gateway
    AdminPanel --> Gateway

    Gateway --> Auth
    Gateway --> RateLimit

    Auth --> UserService
    RateLimit --> UserService
    RateLimit --> ProductService
    RateLimit --> OrderService
    RateLimit --> PaymentService
    RateLimit --> NotificationService

    UserService --> MySQL
    ProductService --> MongoDB
    OrderService --> MySQL
    PaymentService --> Redis
    NotificationService --> Elasticsearch

    %% 基础设施支持
    Docker -.-> UserService
    Docker -.-> ProductService
    Docker -.-> OrderService
    Kubernetes --> Docker
    Monitoring -.-> Kubernetes
    Logging -.-> Kubernetes

    %% 样式定义
    classDef frontend fill:#e3f2fd,stroke:#2196f3
    classDef gateway fill:#f3e5f5,stroke:#9c27b0
    classDef service fill:#e8f5e8,stroke:#4caf50
    classDef data fill:#fff3e0,stroke:#ff9800
    classDef infra fill:#fce4ec,stroke:#e91e63

    class WebApp,MobileApp,AdminPanel frontend
    class Gateway,Auth,RateLimit gateway
    class UserService,ProductService,OrderService,PaymentService,NotificationService service
    class MySQL,MongoDB,Redis,Elasticsearch data
    class Docker,Kubernetes,Monitoring,Logging infra